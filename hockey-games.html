<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üèí Hockey Game Hub</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom, #0a1f44, #f78da7);
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      min-height: 100vh;
    }

    header {
      padding: 15px;
      font-size: 24px;
      font-weight: bold;
      background: #0a1f44;
      width: 100%;
      color: #f78da7;
      border-bottom: 3px solid #f78da7;
    }

    canvas {
      background: #cce6ff;
      border: 4px solid white;
      margin: 20px;
      display: none;
    }

    .menu, .controls {
      margin: 20px;
    }

    .btn {
      background: #f78da7;
      border: none;
      color: white;
      font-size: 18px;
      padding: 12px 20px;
      margin: 10px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .btn:hover {
      background: #e06788;
    }

    #scoreboard {
      font-size: 22px;
      margin: 10px;
      font-weight: bold;
    }

    /* Mobile buttons */
    .mobile-controls {
      display: none;
      position: fixed;
      bottom: 20px;
      width: 100%;
      display: flex;
      justify-content: space-around;
    }

    .mobile-btn {
      width: 60px;
      height: 60px;
      background: rgba(247, 141, 167, 0.8);
      border-radius: 50%;
      border: 2px solid white;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 22px;
      font-weight: bold;
      user-select: none;
    }

    @media (max-width: 768px) {
      .mobile-controls { display: flex; }
    }

    /* Goal light effect */
    #goalLight {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(255,0,0,0.5);
      display: none;
      z-index: 10;
    }
  </style>
</head>
<body>
  <header>üèí Hockey Game Hub</header>

  <div class="menu" id="menu">
    <button class="btn" onclick="startGame('pong')">Hockey Pong</button>
    <button class="btn" onclick="startGame('shootout')">Shootout</button>
    <a href="index.html" class="btn">‚¨ÖÔ∏è Back to Profile</a>
  </div>

  <div id="scoreboard"></div>
  <canvas id="gameCanvas" width="900" height="500"></canvas>
  <button id="playAgain" class="btn" style="display:none;" onclick="restartGame()">üîÅ Play Again</button>

  <!-- Mobile Controls -->
  <div class="mobile-controls" id="mobileControls">
    <div class="mobile-btn" id="btnUp">‚¨ÜÔ∏è</div>
    <div class="mobile-btn" id="btnDown">‚¨áÔ∏è</div>
    <div class="mobile-btn" id="btnLeft">‚¨ÖÔ∏è</div>
    <div class="mobile-btn" id="btnRight">‚û°Ô∏è</div>
    <div class="mobile-btn" id="btnShoot">üéØ</div>
  </div>

  <!-- Goal light overlay -->
  <div id="goalLight"></div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const scoreboard = document.getElementById("scoreboard");
const playAgainBtn = document.getElementById("playAgain");
const goalLight = document.getElementById("goalLight");

let gameType = "";
let gameRunning = false;

// Hockey Pong setup
let paddleHeight = 100, paddleWidth = 20, puckRadius = 12;
let leftPaddle, rightPaddle, puck;
let leftScore = 0, rightScore = 0;

// Shootout setup
let shooter, goalie, shotActive, shotX, shotY, shotDx, shotDy;
let playerGoals = 0, aiSaves = 0;

function startGame(type) {
  document.getElementById("menu").style.display = "none";
  canvas.style.display = "block";
  scoreboard.style.display = "block";
  playAgainBtn.style.display = "none";
  gameType = type;
  gameRunning = true;

  if (type === "pong") initPong();
  else initShootout();

  requestAnimationFrame(gameLoop);
}

function restartGame() {
  leftScore = rightScore = playerGoals = aiSaves = 0;
  startGame(gameType);
}

function showGoalLight() {
  goalLight.style.display = "block";
  setTimeout(() => { goalLight.style.display = "none"; }, 400);
}

/* ------------------- HOCKEY PONG ------------------- */
function initPong() {
  leftPaddle = { x: 20, y: canvas.height/2 - paddleHeight/2, dy: 0 };
  rightPaddle = { x: canvas.width-40, y: canvas.height/2 - paddleHeight/2, dy: 0, speed: 3 };
  puck = { x: canvas.width/2, y: canvas.height/2, dx: 4, dy: 3 };

  updateScoreboard();
}

function updatePong() {
  puck.x += puck.dx;
  puck.y += puck.dy;

  if (puck.y - puckRadius < 0 || puck.y + puckRadius > canvas.height) {
    puck.dy *= -1;
  }

  // Left paddle collision
  if (puck.x - puckRadius < leftPaddle.x + paddleWidth &&
      puck.y > leftPaddle.y && puck.y < leftPaddle.y + paddleHeight) {
    puck.dx *= -1.1; // faster after hit
    let hitPos = (puck.y - (leftPaddle.y + paddleHeight/2)) / 25;
    puck.dy = hitPos * 5;
  }

  // Right paddle collision
  if (puck.x + puckRadius > rightPaddle.x &&
      puck.y > rightPaddle.y && puck.y < rightPaddle.y + paddleHeight) {
    puck.dx *= -1.1;
    let hitPos = (puck.y - (rightPaddle.y + paddleHeight/2)) / 25;
    puck.dy = hitPos * 5;
  }

  // Goals
  if (puck.x < 0) {
    rightScore++;
    showGoalLight();
    resetPuck();
  } else if (puck.x > canvas.width) {
    leftScore++;
    showGoalLight();
    resetPuck();
  }

  // AI follows puck
  if (puck.y > rightPaddle.y + paddleHeight/2) rightPaddle.y += rightPaddle.speed;
  else rightPaddle.y -= rightPaddle.speed;

  leftPaddle.y += leftPaddle.dy;
  leftPaddle.y = Math.max(0, Math.min(canvas.height - paddleHeight, leftPaddle.y));

  updateScoreboard();
}

function resetPuck() {
  puck.x = canvas.width/2;
  puck.y = canvas.height/2;
  puck.dx = 4 * (Math.random() > 0.5 ? 1 : -1);
  puck.dy = 3 * (Math.random() > 0.5 ? 1 : -1);
}

function drawPong() {
  ctx.fillStyle = "#cce6ff";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  ctx.fillStyle = "#f78da7";
  ctx.fillRect(leftPaddle.x, leftPaddle.y, paddleWidth, paddleHeight);

  ctx.fillStyle = "#0a1f44";
  ctx.fillRect(rightPaddle.x, rightPaddle.y, paddleWidth, paddleHeight);

  ctx.beginPath();
  ctx.arc(puck.x, puck.y, puckRadius, 0, Math.PI*2);
  ctx.fillStyle = "#000";
  ctx.fill();
}

/* ------------------- SHOOTOUT ------------------- */
function initShootout() {
  shooter = { x: canvas.width/2, y: canvas.height-50, speed: 6 };
  goalie = { x: canvas.width/2-50, y: 50, width: 100, height: 20, dir: 3 };
  shotActive = false;
  updateScoreboard();
}

function updateShootout() {
  // Goalie movement
  goalie.x += goalie.dir;
  if (goalie.x < 0 || goalie.x + goalie.width > canvas.width) goalie.dir *= -1;

  if (shotActive) {
    shotX += shotDx;
    shotY += shotDy;

    if (shotY < goalie.y + goalie.height &&
        shotX > goalie.x && shotX < goalie.x + goalie.width) {
      aiSaves++;
      shotActive = false;
    }

    if (shotY < 0) {
      playerGoals++;
      showGoalLight();
      shotActive = false;
    }
  }
  updateScoreboard();
}

function drawShootout() {
  ctx.fillStyle = "#cce6ff";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  ctx.fillStyle = "#0a1f44";
  ctx.fillRect(goalie.x, goalie.y, goalie.width, goalie.height);

  ctx.fillStyle = "#f78da7";
  ctx.beginPath();
  ctx.arc(shooter.x, shooter.y, 15, 0, Math.PI*2);
  ctx.fill();

  if (shotActive) {
    ctx.beginPath();
    ctx.arc(shotX, shotY, 8, 0, Math.PI*2);
    ctx.fillStyle = "#000";
    ctx.fill();
  }
}

/* ------------------- CORE LOOP ------------------- */
function gameLoop() {
  if (!gameRunning) return;

  if (gameType === "pong") {
    updatePong();
    drawPong();
  } else {
    updateShootout();
    drawShootout();
  }

  requestAnimationFrame(gameLoop);
}

function updateScoreboard() {
  if (gameType === "pong")
    scoreboard.innerText = `Player: ${leftScore} | AI: ${rightScore}`;
  else
    scoreboard.innerText = `Goals: ${playerGoals} | Saves: ${aiSaves}`;
}

/* ------------------- CONTROLS ------------------- */
// Keyboard
document.addEventListener("keydown", e => {
  if (gameType === "pong") {
    if (e.key === "ArrowUp") leftPaddle.dy = -6;
    if (e.key === "ArrowDown") leftPaddle.dy = 6;
  }
  if (gameType === "shootout") {
    if (e.key === "ArrowLeft") shooter.x -= shooter.speed;
    if (e.key === "ArrowRight") shooter.x += shooter.speed;
    if (e.key === " " && !shotActive) {
      shotActive = true;
      shotX = shooter.x;
      shotY = shooter.y - 20;
      shotDx = 0;
      shotDy = -8;
    }
  }
});
document.addEventListener("keyup", e => {
  if (gameType === "pong" && (e.key === "ArrowUp" || e.key === "ArrowDown")) leftPaddle.dy = 0;
});

// Mobile buttons
document.getElementById("btnUp").onclick = () => leftPaddle.dy = -6;
document.getElementById("btnDown").onclick = () => leftPaddle.dy = 6;
document.getElementById("btnLeft").onclick = () => { if (gameType==="shootout") shooter.x -= shooter.speed; };
document.getElementById("btnRight").onclick = () => { if (gameType==="shootout") shooter.x += shooter.speed; };
document.getElementById("btnShoot").onclick = () => {
  if (gameType==="shootout" && !shotActive) {
    shotActive = true;
    shotX = shooter.x;
    shotY = shooter.y - 20;
    shotDx = 0;
    shotDy = -8;
  }
};
</script>
</body>
</html>


