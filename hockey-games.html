<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Hockey Games Hub</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --pink:#f78da7;
    --navy:#001f44;
    --light-navy:#00335f;
    --white: #ffffff;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:'Poppins',sans-serif;
    background: linear-gradient(180deg,var(--navy), #07132a);
    color:var(--white);
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
  }

  header{
    width:100%;
    padding:12px 18px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    background:linear-gradient(90deg, rgba(0,0,0,0.25), rgba(0,0,0,0.05));
    border-bottom:4px solid rgba(255,255,255,0.03);
  }
  .left-controls{display:flex; gap:10px; align-items:center;}
  a.back-profile{
    background:var(--pink);
    color:var(--white);
    text-decoration:none;
    padding:8px 12px;
    border-radius:8px;
    font-weight:600;
  }
  .hint{opacity:0.9;font-size:14px}

  /* menu */
  #menu{
    margin-top:40px;
    width:92%;
    max-width:920px;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:22px;
  }
  .title{
    font-size:28px;
    color:var(--pink);
    font-weight:700;
  }
  .menu-buttons{display:flex; gap:18px; flex-wrap:wrap; justify-content:center;}
  .big-btn{
    background:var(--pink);
    color:var(--navy);
    border:none;
    padding:18px 28px;
    border-radius:12px;
    font-size:18px;
    font-weight:700;
    cursor:pointer;
    box-shadow:0 8px 20px rgba(247,141,167,0.15);
  }
  .small-muted{color:rgba(255,255,255,0.7);font-size:13px}

  /* game area */
  .game-wrapper{display:none; width:100%; max-width:960px; margin-top:18px; flex-direction:column; align-items:center;}
  canvas{
    border:5px solid var(--pink);
    background: linear-gradient(#06213b, #001d3d);
    border-radius:8px;
    box-shadow:0 8px 30px rgba(0,0,0,0.6), 0 0 28px rgba(247,141,167,0.06);
  }

  .controls-row{display:flex; gap:12px; margin-top:12px; align-items:center;}
  .btn{
    background:var(--pink);
    color:var(--navy);
    padding:10px 14px;
    border-radius:10px;
    border:none;
    font-weight:700;
    cursor:pointer;
  }
  .btn.ghost{background:transparent; color:var(--white); border:1px solid rgba(255,255,255,0.08)}
  .scoreboard{color:var(--pink); font-weight:700; font-size:18px}

  /* responsive */
  @media (max-width:720px){
    .title{font-size:22px}
    canvas{width:94%; height:auto}
    .big-btn{padding:14px 18px; font-size:16px}
  }
</style>
</head>
<body>

<header>
  <div class="left-controls">
    <a class="back-profile" href="index.html">‚¨Ö Back to Profile</a>
  </div>
  <div class="hint">Hockey Games Hub ‚Äî pink & navy theme</div>
</header>

<!-- MENU -->
<section id="menu">
  <div class="title">üèí Hockey Games Hub</div>
  <div class="menu-buttons">
    <button id="openPong" class="big-btn">üéÆ Play Hockey Pong</button>
    <button id="openShootout" class="big-btn">ü•Ö Play Shootout (5 shots)</button>
  </div>
  <div class="small-muted">Controls: Arrow ‚Üë/‚Üì to move in Pong, Arrow ‚Üê/‚Üí to position in Shootout, Space to shoot.</div>
</section>

<!-- HOCKEY PONG -->
<section id="pongArea" class="game-wrapper" aria-hidden="true">
  <canvas id="pongCanvas" width="900" height="500"></canvas>
  <div class="controls-row">
    <button id="pongBack" class="btn ghost">‚Üê Back to Menu</button>
    <button id="pongPlayAgain" class="btn">Play Again</button>
    <div class="scoreboard" id="pongScore">0 ‚Äî 0</div>
    <div style="flex:1"></div>
    <div class="small-muted">Use ‚Üë / ‚Üì to move your stick</div>
  </div>
</section>

<!-- SHOOTOUT -->
<section id="shootoutArea" class="game-wrapper" aria-hidden="true">
  <canvas id="shootCanvas" width="900" height="500"></canvas>
  <div class="controls-row">
    <button id="shootBack" class="btn ghost">‚Üê Back to Menu</button>
    <button id="shootPlayAgain" class="btn">Play Again</button>
    <div class="scoreboard" id="shootScore">Shots: 0 / 5 ¬∑ Goals: 0</div>
    <div style="flex:1"></div>
    <div class="small-muted">Use ‚Üê / ‚Üí to aim, Space to shoot (fast)</div>
  </div>
</section>

<script>
/* -------------------------
   Shared helpers & sounds
   ------------------------- */
const sndPuckHit = new Audio('https://freesound.org/data/previews/66/66717_634166-lq.mp3');
const sndGoal = new Audio('https://freesound.org/data/previews/240/240777_3981280-lq.mp3');
const sndCheer = new Audio('https://freesound.org/data/previews/198/198841_2859972-lq.mp3');

/* utility to show/hide sections */
function showMenu(){ 
  document.getElementById('menu').style.display='flex';
  document.getElementById('pongArea').style.display='none';
  document.getElementById('shootoutArea').style.display='none';
  document.getElementById('pongArea').setAttribute('aria-hidden','true');
  document.getElementById('shootoutArea').setAttribute('aria-hidden','true');
}
function showPong(){ 
  document.getElementById('menu').style.display='none';
  document.getElementById('pongArea').style.display='flex';
  document.getElementById('pongArea').setAttribute('aria-hidden','false');
  startPong();
}
function showShootout(){
  document.getElementById('menu').style.display='none';
  document.getElementById('shootoutArea').style.display='flex';
  document.getElementById('shootoutArea').setAttribute('aria-hidden','false');
  startShootout();
}

/* attach menu buttons */
document.getElementById('openPong').addEventListener('click', showPong);
document.getElementById('openShootout').addEventListener('click', showShootout);
/* back buttons */
document.getElementById('pongBack').addEventListener('click',()=>{
  stopPong(); showMenu();
});
document.getElementById('shootBack').addEventListener('click',()=>{
  stopShootout(); showMenu();
});
/* play again buttons */
document.getElementById('pongPlayAgain').addEventListener('click', ()=>{ resetPongGame(); });
document.getElementById('shootPlayAgain').addEventListener('click', ()=>{ resetShootout(); });

/* -------------------------
   HOCKEY PONG (clean rewrite)
   ------------------------- */
const pongCanvas = document.getElementById('pongCanvas');
const pCtx = pongCanvas.getContext('2d');

let pongRAF = null;
let pongState = {};
function initPongState(){
  pongState = {
    paddleW:20, paddleH:100, puckR:12,
    leftPaddle:{x:20, y: pongCanvas.height/2 - 50, dy:0},
    rightPaddle:{x:pongCanvas.width-40, y:pongCanvas.height/2 - 50, speed:4},
    puck:{x:pongCanvas.width/2, y:pongCanvas.height/2, dx:5, dy:4, trail:[]},
    leftScore:0, rightScore:0, maxScore:5,
    gameOver:false
  };
  updatePongScoreDisplay();
}
initPongState();

function drawPongRink(){
  // navy ice
  pCtx.fillStyle = '#001f44';
  pCtx.fillRect(0,0,pongCanvas.width,pongCanvas.height);

  // pink lines
  pCtx.strokeStyle = '#f78da7';
  pCtx.lineWidth = 4;
  pCtx.beginPath();
  pCtx.moveTo(pongCanvas.width/2,0);
  pCtx.lineTo(pongCanvas.width/2,pongCanvas.height);
  pCtx.stroke();

  // center circle
  pCtx.lineWidth = 2;
  pCtx.beginPath();
  pCtx.arc(pongCanvas.width/2, pongCanvas.height/2, 60,0,Math.PI*2);
  pCtx.stroke();
}

function drawPong(){
  drawPongRink();

  const s = pongState;
  // paddles (stick shape)
  pCtx.fillStyle = '#f78da7';
  pCtx.shadowColor = '#f78da7';
  pCtx.shadowBlur = 10;
  [s.leftPaddle, s.rightPaddle].forEach(p=>{
    pCtx.beginPath();
    pCtx.moveTo(p.x, p.y);
    pCtx.lineTo(p.x + 12, p.y + s.paddleH/2);
    pCtx.lineTo(p.x, p.y + s.paddleH);
    pCtx.fill();
  });
  pCtx.shadowBlur = 0;

  // puck trail and puck
  s.puck.trail.forEach((pos,i)=>{
    pCtx.fillStyle = `rgba(247,141,167,${0.28 - i*0.03})`;
    pCtx.beginPath();
    pCtx.arc(pos.x,pos.y,s.puckR,0,Math.PI*2);
    pCtx.fill();
  });
  pCtx.fillStyle = '#f78da7';
  pCtx.beginPath();
  pCtx.arc(s.puck.x,s.puck.y,s.puckR,0,Math.PI*2);
  pCtx.fill();

  // scores
  pCtx.fillStyle = '#f78da7';
  pCtx.font = '32px Poppins';
  pCtx.fillText(s.leftScore, pongCanvas.width/4, 48);
  pCtx.fillText(s.rightScore, 3*pongCanvas.width/4, 48);
}

function updatePong(){
  const s = pongState;
  if(s.gameOver) return;

  // move puck
  s.puck.x += s.puck.dx;
  s.puck.y += s.puck.dy;

  // trail
  s.puck.trail.unshift({x:s.puck.x,y:s.puck.y});
  if(s.puck.trail.length>10) s.puck.trail.pop();

  // bounce top/bottom
  if(s.puck.y + s.puckR > pongCanvas.height || s.puck.y - s.puckR < 0){
    s.puck.dy *= -1; sndPuckHit.play().catch(()=>{});
  }

  // paddle collision
  const lp = s.leftPaddle, rp = s.rightPaddle;
  if(s.puck.x - s.puckR < lp.x + s.paddleW && s.puck.y > lp.y && s.puck.y < lp.y + s.paddleH){
    s.puck.dx = Math.abs(s.puck.dx) + 0.2; // push right
    s.puck.dx *= -1; sndPuckHit.play().catch(()=>{});
  }
  if(s.puck.x + s.puckR > rp.x && s.puck.y > rp.y && s.puck.y < rp.y + s.paddleH){
    s.puck.dx = -Math.abs(s.puck.dx) - 0.2; // push left
    s.puck.dx *= -1; sndPuckHit.play().catch(()=>{});
  }

  // score checks
  if(s.puck.x < 0){
    s.rightScore++; sndGoal.play().catch(()=>{}); sndCheer.play().catch(()=>{});
    checkPongWin();
    resetPuckPong();
  }
  if(s.puck.x > pongCanvas.width){
    s.leftScore++; sndGoal.play().catch(()=>{}); sndCheer.play().catch(()=>{});
    checkPongWin();
    resetPuckPong();
  }

  // update player paddle
  lp.y += lp.dy;
  lp.y = Math.max(0, Math.min(lp.y, pongCanvas.height - s.paddleH));

  // AI: follow puck with speed; faster AI if desired
  const target = s.puck.y - s.paddleH/2;
  if(rp.y + rp.speed < target) rp.y += rp.speed;
  else if(rp.y - rp.speed > target) rp.y -= rp.speed;
  rp.y = Math.max(0, Math.min(rp.y, pongCanvas.height - s.paddleH));
}

function resetPuckPong(){
  const s = pongState;
  s.puck.x = pongCanvas.width/2;
  s.puck.y = pongCanvas.height/2;
  s.puck.dx = 5 * (Math.random()>0.5?1:-1);
  s.puck.dy = 3 * (Math.random()>0.5?1:-1);
  s.puck.trail = [];
}

function checkPongWin(){
  const s = pongState;
  if(s.leftScore >= s.maxScore || s.rightScore >= s.maxScore){
    s.gameOver = true;
    document.getElementById('pongPlayAgain').style.display='inline-block';
    alert(s.leftScore > s.rightScore ? 'You Win Pong!' : 'AI Wins Pong!');
  }
  updatePongScoreDisplay();
}
function updatePongScoreDisplay(){
  const s = pongState;
  document.getElementById('pongScore').textContent = `${s.leftScore} ‚Äî ${s.rightScore}`;
}

function resetPongGame(){
  initPongState();
  document.getElementById('pongPlayAgain').style.display='inline-block';
  // ensure it restarts
  if(!pongRAF) startPong();
}

/* Pong loop control */
function pongLoop(){
  updatePong();
  drawPong();
  pongRAF = requestAnimationFrame(pongLoop);
}
/* keyboard handlers for Pong */
function pongKeyDown(e){
  if(e.key==='ArrowUp'){ pongState.leftPaddle.dy = -6; }
  if(e.key==='ArrowDown'){ pongState.leftPaddle.dy = 6; }
}
function pongKeyUp(e){
  if(e.key==='ArrowUp' || e.key==='ArrowDown'){ pongState.leftPaddle.dy = 0; }
}

/* start/stop Pong */
function startPong(){
  // ensure clean state
  initPongState();
  // easier AI or faster? you can tweak rightPaddle.speed
  pongState.rightPaddle.speed = 4; // adjust for difficulty
  document.addEventListener('keydown', pongKeyDown);
  document.addEventListener('keyup', pongKeyUp);
  if(pongRAF) cancelAnimationFrame(pongRAF);
  pongLoop();
  document.getElementById('pongPlayAgain').style.display='none';
}
function stopPong(){
  if(pongRAF) cancelAnimationFrame(pongRAF);
  pongRAF = null;
  document.removeEventListener('keydown', pongKeyDown);
  document.removeEventListener('keyup', pongKeyUp);
}

/* -------------------------
   SHOOTOUT (5-shot fast shots)
   ------------------------- */
const shootCanvas = document.getElementById('shootCanvas');
const sCtx = shootCanvas.getContext('2d');

let shootRAF = null;
let shootState = {};
function initShootState(){
  shootState = {
    puckR:12,
    puck:{x: shootCanvas.width/2, y: shootCanvas.height-80, vx:0, vy:0, moving:false},
    goal:{x: shootCanvas.width/2 - 70, y:60, w:140, h:80},
    goalie:{x: shootCanvas.width/2 - 30, y: shootCanvas.height/2 - 40, w:60, h:12, dir:1, speed:3},
    shotsTaken:0, shotsMax:5, goals:0,
    inRound:false, roundResult:null,
    gameOver:false
  };
  updateShootScoreDisplay();
}
initShootState();

function drawShootRink(){
  // background
  sCtx.fillStyle = '#001f44';
  sCtx.fillRect(0,0,shootCanvas.width,shootCanvas.height);

  // goal area (light navy)
  sCtx.fillStyle = '#00335f';
  sCtx.fillRect(shootCanvas.width/2 - 160, 40, 320, 160);

  // net lines (pink)
  sCtx.strokeStyle = '#f78da7';
  sCtx.lineWidth = 3;
  sCtx.beginPath();
  sCtx.rect(shootCanvas.width/2 - 160, 40, 320, 160);
  sCtx.stroke();

  // draw net backboard
  sCtx.fillStyle = '#f78da7';
  sCtx.fillRect(shootCanvas.width/2 - 36, 40, 72, 6);
}

function drawShootScene(){
  drawShootRink();
  const s = shootState;

  // draw goalie (simple rectangle)
  sCtx.fillStyle = '#f78da7';
  sCtx.fillRect(s.goalie.x, s.goalie.y, s.goalie.w, s.goalie.h);

  // draw goal (outline)
  sCtx.strokeStyle = '#f78da7';
  sCtx.lineWidth = 2;
  sCtx.beginPath();
  sCtx.rect(shootCanvas.width/2 - 70, 60, 140, 80);
  sCtx.stroke();

  // puck
  sCtx.fillStyle = '#f78da7';
  sCtx.beginPath();
  sCtx.arc(s.puck.x, s.puck.y, s.puckR, 0, Math.PI*2);
  sCtx.fill();

  // HUD text
  sCtx.fillStyle = '#f78da7';
  sCtx.font = '18px Poppins';
  const left = `Shot ${s.shotsTaken} / ${s.shotsMax}`;
  const right = `Goals: ${s.goals}`;
  sCtx.fillText(left, 18, 28);
  sCtx.fillText(right, shootCanvas.width - 120, 28);

  if(s.roundResult){
    sCtx.fillStyle = '#fff';
    sCtx.font = '28px Poppins';
    sCtx.fillText(s.roundResult, shootCanvas.width/2 - 60, shootCanvas.height/2);
  }
}

function updateShoot(){
  const s = shootState;
  if(s.gameOver) return;

  // move goalie left-right within goal bounding box
  const leftBound = shootCanvas.width/2 - 70;
  const rightBound = shootCanvas.width/2 + 70 - s.goalie.w;
  s.goalie.x += s.goalie.dir * s.goalie.speed;
  if(s.goalie.x < leftBound){ s.goalie.x = leftBound; s.goalie.dir = 1; }
  if(s.goalie.x > rightBound){ s.goalie.x = rightBound; s.goalie.dir = -1; }

  // puck movement when shot (fast forward)
  if(s.puck.moving){
    s.puck.x += s.puck.vx;
    s.puck.y += s.puck.vy;

    // check collision with goalie (simple rectangle-vs-circle)
    if(circleRectCollide(s.puck.x, s.puck.y, s.puck.pR ?? s.puckR, s.goalie.x, s.goalie.y, s.goalie.w, s.goalie.h)){
      // save
      s.puck.moving = false;
      s.roundResult = 'SAVE!';
      sndPuckHit.play().catch(()=>{});
      s.shotsTaken++;
      setTimeout(()=>{ s.roundResult = null; nextShootRound(); }, 700);
    } else if(s.puck.y < s.goal.y + s.goal.h){ 
      // puck reached goal line: goal
      s.puck.moving = false;
      s.goals++;
      s.roundResult = 'GOAL!';
      sndGoal.play().catch(()=>{}); sndCheer.play().catch(()=>{});
      s.shotsTaken++;
      setTimeout(()=>{ s.roundResult = null; nextShootRound(); }, 700);
    } else if(s.puck.y < -20){
      // missed entirely (shouldn't happen much)
      s.puck.moving = false;
      s.roundResult = 'MISS!';
      s.shotsTaken++;
      setTimeout(()=>{ s.roundResult = null; nextShootRound(); }, 700);
    }
  } else {
    // not moving: puck can be aimed left/right by player
    // keep it near starting Y
    s.puck.y = shootCanvas.height - 80;
  }

  // end of game?
  if(s.shotsTaken >= s.shotsMax){
    s.gameOver = true;
    document.getElementById('shootPlayAgain').style.display='inline-block';
    setTimeout(()=>{ alert(`Shootout finished ‚Äî Goals: ${s.goals} / ${s.shotsMax}`); }, 100);
  }
}

/* handle keyboard for shootout */
function shootKeyDown(e){
  const s = shootState;
  if(s.gameOver) return;
  if(!s.puck.moving){
    if(e.key==='ArrowLeft'){ s.puck.x = Math.max(32, s.puck.x - 12); }
    if(e.key==='ArrowRight'){ s.puck.x = Math.min(shootCanvas.width - 32, s.puck.x + 12); }
    if(e.key===' ' || e.key==='Spacebar' || e.code==='Space'){
      // shoot: give high negative vy to move fast upwards, small vx based on current offset from center
      s.puck.moving = true;
      const offset = (s.puck.x - shootCanvas.width/2) / (shootCanvas.width/2); // -1..1
      s.puck.vx = offset * 6; // horizontal curve
      s.puck.vy = -18; // fast
      // small sound
      sndPuckHit.play().catch(()=>{});
    }
  }
}

/* helper collision function */
function circleRectCollide(cx,cy,cr, rx,ry,rw,rh){
  const closestX = Math.max(rx, Math.min(cx, rx+rw));
  const closestY = Math.max(ry, Math.min(cy, ry+rh));
  const dx = cx - closestX;
  const dy = cy - closestY;
  return (dx*dx + dy*dy) <= (cr*cr);
}

/* start/stop shootout */
function nextShootRound(){
  const s = shootState;
  if(s.shotsTaken >= s.shotsMax){
    s.gameOver = true;
    document.getElementById('shootPlayAgain').style.display='inline-block';
    updateShootScoreDisplay(); return;
  }
  // reposition puck to starting line, goalie stays moving
  s.puck.moving = false;
  s.puck.x = shootCanvas.width/2;
  s.puck.y = shootCanvas.height - 80;
  updateShootScoreDisplay();
}
function resetShootout(){
  initShootState();
  document.getElementById('shootPlayAgain').style.display='none';
  // make goalie a little faster by rounds if you want:
  shootState.goalie.speed = 3;
}
function shootLoop(){
  updateShoot();
  drawShootScene();
  shootRAF = requestAnimationFrame(shootLoop);
}
function startShootout(){
  resetShootout();
  document.addEventListener('keydown', shootKeyDown);
  if(shootRAF) cancelAnimationFrame(shootRAF);
  shootLoop();
  document.getElementById('shootPlayAgain').style.display='none';
}
function stopShootout(){
  if(shootRAF) cancelAnimationFrame(shootRAF);
  shootRAF = null;
  document.removeEventListener('keydown', shootKeyDown);
}
function updateShootScoreDisplay(){
  const s = shootState;
  document.getElementById('shootScore').textContent = `Shots: ${s.shotsTaken} / ${s.shotsMax} ¬∑ Goals: ${s.goals}`;
}

/* -------------------------
   Lifecycle: start/stop both games cleanly
   ------------------------- */
function startPong(){ startPong_inner(); } // wrapper for earlier
function startPong_inner(){
  // ensure shootout is stopped
  stopShootout();
  // init and begin Pong
  initPongState();
  document.addEventListener('keydown', pongKeyDown);
  document.addEventListener('keyup', pongKeyUp);
  if(pongRAF) cancelAnimationFrame(pongRAF);
  pongLoop();
  document.getElementById('pongPlayAgain').style.display='none';
  updatePongScoreDisplay();
}
function stopPong(){ 
  if(pongRAF) cancelAnimationFrame(pongRAF);
  pongRAF = null;
  document.removeEventListener('keydown', pongKeyDown);
  document.removeEventListener('keyup', pongKeyUp);
}

/* expose startShootout wrapper that also stops pong */
function startShootout(){
  stopPong();
  resetShootout();
  document.addEventListener('keydown', shootKeyDown);
  if(shootRAF) cancelAnimationFrame(shootRAF);
  shootLoop();
}

/* reset helpers used by menu buttons */
function resetPongGame(){
  initPongState();
  document.getElementById('pongPlayAgain').style.display='none';
  if(!pongRAF) startPong_inner();
}
function resetShootout(){
  initShootState();
  document.getElementById('shootPlayAgain').style.display='none';
  if(!shootRAF) startShootout();
}

/* expose check functions */
function checkPongWin(){ 
  const s = pongState;
  updatePongScoreDisplay();
  if(s.leftScore >= s.maxScore || s.rightScore >= s.maxScore){
    s.gameOver = true;
    document.getElementById('pongPlayAgain').style.display='inline-block';
    alert(s.leftScore > s.rightScore ? 'You Win Pong!' : 'AI Wins Pong!');
  }
}

/* start in menu */
showMenu();

/* ensure canvas sizes match device pixel ratio (optional crispness) */
function fixCanvasDPR(canvas, ctx){
  const dpr = window.devicePixelRatio || 1;
  const w = canvas.width;
  const h = canvas.height;
  canvas.width = w * dpr;
  canvas.height = h * dpr;
  canvas.style.width = w + 'px';
  canvas.style.height = h + 'px';
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
fixCanvasDPR(pongCanvas, pCtx);
fixCanvasDPR(shootCanvas, sCtx);

</script>
</body>
</html>

 
